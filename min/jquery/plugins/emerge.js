(function(e,t){"use strict";var n="qoopido",r="emerge",i={interval:20,threshold:"auto",recur:!0,auto:.5,visibility:!0},s;s=function(s,o,u){if(document.compatMode!=="CSS1Compat")throw"This plugin will not work correctly in quirks mode, please ensure your Browser is in standards mode.";var a=s(e),f,l,c,h="emerged."+r,p="demerged."+r,d="resize orientationchange";return s.fn[r]=function(e){return this.each(function(){c.create(this,e)})},f=function(n){var r;for(r in c._elements[n])c._elements[n][r]._checkState();c._elements[n].length===0&&(e.clearInterval(c._intervals[n]),delete c._intervals[n])},l=function(){c._viewport.left=0,c._viewport.top=0,c._viewport.right=a.width(),c._viewport.bottom=a.height()},c=o.extend({_viewport:{left:0,top:0,right:a.width(),bottom:a.height()},_intervals:{},_elements:{},_constructor:function(n,r){var o=this;r=s.extend(!0,{},i,r||{}),r.threshold==="auto"&&delete r.threshold,c._intervals[r.interval]===t&&(c._elements[r.interval]=c._elements[r.interval]||{},c._intervals[r.interval]=e.setInterval(function(){f(r.interval)},r.interval)),o._element=n,o._object=s(n),o._settings=r,o._viewport={left:0,top:0,right:0,bottom:0},o._state=!1,o._priority=2,o._uuid=u.generate(),c._elements[o._settings.interval][o._uuid]=o,a.on(d,function(){o._onResize.call(o)}),o._onResize()},_checkState:function(){var e=this,t=!1,n=2,r;if(e._object.is(":visible")&&(e._element.style.visibility!=="hidden"||e._settings.visibility===!1)){r=e._element.getBoundingClientRect();if(r.left>=e._viewport.left&&r.top>=e._viewport.top&&r.left<=e._viewport.right&&r.top<=e._viewport.bottom||r.right>=e._viewport.left&&r.bottom>=e._viewport.top&&r.right<=e._viewport.right&&r.bottom<=e._viewport.bottom){if(r.left>=c._viewport.left&&r.top>=c._viewport.top&&r.left<=c._viewport.right&&r.top<=c._viewport.bottom||r.right>=c._viewport.left&&r.bottom>=c._viewport.top&&r.right<=c._viewport.right&&r.bottom<=c._viewport.bottom)n=1;t=!0}}if(t!==e._state||n!==e._priority)e._state=t,e._priority=n,e._changeState()},_changeState:function(){var e=this,t;e._settings.recur!==!0&&e._remove(),e._state===!0?(t=s.Event(h),t.priority=e._priority):t=s.Event(p),e._object.trigger(t)},_remove:function(){var e=this;delete c._elements[e._settings.interval][e._uuid]},_onResize:function(){var e=this,t=e._settings.threshold||a.width()*e._settings.auto,n=e._settings.threshold||a.height()*e._settings.auto;e._viewport.left=c._viewport.left-t,e._viewport.top=c._viewport.top-n,e._viewport.right=c._viewport.right+t,e._viewport.bottom=c._viewport.bottom+n}}),a.on(d,l),c},typeof define=="function"&&define.amd?define(["jquery","qoopido/base","qoopido/uuid"],function(e,t,n){return s(e,t,n)}):(e[n]=e[n]||{},e[n][r]=s(jQuery,e[n].base,e[n].uuid))})(window);