(function(e,t,n,r){"use strict";var i="qoopido",s="remux",o=function(){return[].push.apply(arguments,[t,n,r]),t[i]=t[i]||{},t[i][s]=e.apply(null,arguments).create()};typeof define=="function"&&define.amd?define(["./emitter","./support"],o):o(t[i].emitter,t[i].support)})(function(e,t,n,r,i){"use strict";function g(){return Math.round(screen.deviceXDPI/screen.logicalXDPI*100)}function y(){m.body=r.body,m.element=r.createElement("div"),m.container=r.createElement("div"),m.element.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0",m.element.setAttribute("style","font: 100px/1em sans-serif !important; -webkit-text-size-adjust: none !important; height: auto !important; width: 1em !important; padding: 0 !important; overflow: visible !important;"),m.container.setAttribute("style","width: 0 !important; height: 0 !important; overflow: hidden !important; visibility: hidden !important; position: absolute; !important"),m.container.appendChild(m.element)}function b(){var e;return m.body&&(m.body.appendChild(m.container),e=Math.round(1e3/m.element.clientHeight*100)/100,m.body.removeChild(m.container)),e}function w(){m.method=function(){return n[t.getMethod("matchMedia")].apply(n,arguments)};switch(t.getPrefix().properties[0]){case"webkit":m.property="-webkit-min-device-pixel-ratio";break;case"o":m.property="-o-min-device-pixel-ratio";break;default:m.property="min--moz-device-pixel-ratio"}}function E(e,t,n,r){var i=(e+t)/2,s="("+m.property+":"+i+")";return n<=0||t-e<r?i:m.method(s).matches?E(i,t,n-1,r):E(e,i,n-1,r)}function S(){var e=Math.round(E(0,10,20,1e-4)*100)/100,t=Math.round(v.ratio.device*100)/100;return e===t&&(v.ratio.device=1),e}var s,o,u,a,f,l,c=r.getElementsByTagName("html")[0],h=r.documentElement,p={},d=[],v={layout:null,width:null,size:{base:null,current:null,zoomed:null},ratio:{device:n.devicePixelRatio||1,zoom:null,size:null,total:null,image:null}},m={};return e.extend({_constructor:function(){var r=this,i=function(){s!==null&&n.clearTimeout(s),s=n.setTimeout(function(){r.updateState()},20)};r._parent._constructor.call(r),!isNaN(screen.logicalXDPI)&&!isNaN(screen.systemXDPI)?l=g:t.supportsProperty("webkitTextSizeAdjust")!==!1?(y(),l=b):t.supportsMethod("matchMedia")!==!1?(w(),l=S):l=function(){return 1},n.addEventListener("resize",i,!1),n.addEventListener("orientationchange",i,!1),r.updateState()},addLayout:function(t,n){var r=this;if(arguments.length===1){var i;for(i in arguments[0])p[i]=arguments[0][i]}else p[arguments[0]]=arguments[1];return r.updateState(),r},getState:function(){return v},updateState:function(){var t=this,r=null,s;v.ratio.device=n.devicePixelRatio||1,v.ratio.zoom=l()||1,v.width=h.offsetWidth*v.ratio.zoom;for(s in p)o=p[s],o.breakpoint&&v.width>=o.breakpoint&&(r=s);if(r===null)return t;r!==v.layout&&(v.layout=r,v.size.base=o.base,c.setAttribute("data-layout",r),d.push("layoutchange")),r=p[r],v.size.current=Math.max(r.min,Math.min(r.max,Math.floor(r.base*(v.width/r.width)))),u=Math.round(v.ratio.zoom*(v.size.current/r.base)*r.base),u!==v.size.zoomed&&(c.style.fontSize=u+"px",v.size.zoomed=u,v.ratio.size=v.size.current/r.base,v.ratio.total=v.ratio.size*v.ratio.device,v.ratio.image=Math.round(Math.ceil(v.ratio.total/.25)*25)/100,d.push("ratiochange"));for(s=0;(a=d[s])!==i;s++)t.emit(a,v);return d.length=0,t}})},window,document);