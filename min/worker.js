(function(e,t,n,r){"use strict";var i="qoopido",s="worker",o=function(){return[].push.apply(arguments,[t,n,r]),t[i]=t[i]||{},t[i][s]=e.apply(null,arguments)};typeof define=="function"&&define.amd?define(["qoopido/base","qoopido/support","q"],o):o(t[i].base,t[i].support,t.Q)})(function(e,t,n,r,i,s){"use strict";var o=t.supportsMethod("Worker");return e.extend({execute:function(t,r,i){var u=n.defer();if(o===!0){var a=new Worker(t);a.addEventListener("message",function(e){switch(e.data.type){case"progress":u.notify(e.data.progress);break;case"result":u.resolve(e.data.result)}},!1),a.addEventListener("error",function(e){u.reject(e)},!1),a.postMessage({func:r.toString(),args:i||{}})}else setTimeout(function(){try{var e=(r.toString().match(/\(.+\)/)||[""])[0].replace(/[()\r\n ]/g,"").split(","),t=0,n;for(t;(n=e[t])!==s;t++)e[t]=i[n]||null;u.resolve(r.apply(null,e))}catch(o){u.reject()}},0);return u.promise}})},window,document);